<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>微码农</title>
  
  <subtitle>程序员工作笔记</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://microcodor.github.io/"/>
  <updated>2019-05-06T11:17:50.000Z</updated>
  <id>https://microcodor.github.io/</id>
  
  <author>
    <name>[object Object]</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>tp5 crontab 开启定时任务</title>
    <link href="https://microcodor.github.io/2019/05/06/tp5-crontab/"/>
    <id>https://microcodor.github.io/2019/05/06/tp5-crontab/</id>
    <published>2019-05-06T11:07:00.000Z</published>
    <updated>2019-05-06T11:17:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>1.在tp5项目根目录下创建crond.sh脚本文件，内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh  </span><br><span class="line">cd /var/www/html/jdwechatapp/  </span><br><span class="line">php think CouponScheduler</span><br></pre></td></tr></table></figure></p><p>2.编辑crontab定时代码<br>crontab -e<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 7-23/1 * * * /var/www/html/jdwechatapp/crond.sh</span><br><span class="line">* 7-23/1 * * * /var/www/html/dev_jdwechatapp/crond.sh</span><br><span class="line">0 4 * * * /var/www/html/jdwechatapp/goods.sh</span><br></pre></td></tr></table></figure></p><p>早7点到晚上23点每隔一小时执行一次更新优惠券命令</p><p>每十分钟执行一次订单更新功能<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/10 * * * * /var/www/html/xue_jingletuiapp/crond.sh</span><br></pre></td></tr></table></figure></p><p>3.常用crontab命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond start  </span><br><span class="line">/sbin/service crond stop  </span><br><span class="line">/sbin/service crond restart  </span><br><span class="line">/sbin/service crond reload</span><br></pre></td></tr></table></figure></p><p>4.格式<br>以下是 crontab 文件的格式：<br>{minute} {hour} {day-of-month} {month} {day-of-week} {full-path-to-shell-script}  </p><p>o minute: 区间为 0 – 59<br>o hour: 区间为0 – 23<br>o day-of-month: 区间为0 – 31<br>o month: 区间为1 – 12. 1 是1月. 12是12月<br>o Day-of-week: 区间为0 – 7. 周日可以是0或7</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1.在tp5项目根目录下创建crond.sh脚本文件，内容如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;sp
      
    
    </summary>
    
    
      <category term="thinkphp5" scheme="https://microcodor.github.io/tags/thinkphp5/"/>
    
      <category term="crontab" scheme="https://microcodor.github.io/tags/crontab/"/>
    
  </entry>
  
  <entry>
    <title>https在nginx下简单配置</title>
    <link href="https://microcodor.github.io/2019/05/06/https-nginx-config/"/>
    <id>https://microcodor.github.io/2019/05/06/https-nginx-config/</id>
    <published>2019-05-06T10:14:00.000Z</published>
    <updated>2019-05-06T10:49:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>1.阿里云申请免费ssl证书</p><p>2.下载nginx证书版本文件</p><p>3.在nginx配置下新建个专门存放密钥的文件夹：/etc/nginx/cert/，上传密钥到服务器</p><p>4.在/etc/nginx/conf.d/ 下新建一个单独的服务配置.conf</p><p>5.我的配置如下：<br>配置http都跳转到https:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name wxdroid.com;</span><br><span class="line">    rewrite ^(.*) https://$server_name$1 permanent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>配置https证书：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen80;</span><br><span class="line">        listen  443 ssl;</span><br><span class="line">        server_name  wx.jingxiaodi.com;</span><br><span class="line">ssl on;</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line">        ssl_certificate   cert/1552396_wx.jingxiaodi.com.pem;</span><br><span class="line">        ssl_certificate_key  cert/1552396_wx.jingxiaodi.com.key;</span><br><span class="line">        ssl_session_timeout 5m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1.阿里云申请免费ssl证书&lt;/p&gt;
&lt;p&gt;2.下载nginx证书版本文件&lt;/p&gt;
&lt;p&gt;3.在nginx配置下新建个专门存放密钥的文件夹：/etc/nginx/cert/，上传密钥到服务器&lt;/p&gt;
&lt;p&gt;4.在/etc/nginx/conf.d/ 下新建一个单独的服务配置
      
    
    </summary>
    
    
      <category term="nginx" scheme="https://microcodor.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>本博客搭建</title>
    <link href="https://microcodor.github.io/2019/05/06/%E6%9C%AC%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>https://microcodor.github.io/2019/05/06/本博客搭建/</id>
    <published>2019-05-06T03:08:00.000Z</published>
    <updated>2019-05-06T11:22:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>主要通过github pages hexo,hexo-admin,hexo-theme-skapp搭建完成。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;主要通过github pages hexo,hexo-admin,hexo-theme-skapp搭建完成。&lt;/p&gt;

      
    
    </summary>
    
      <category term="博客" scheme="https://microcodor.github.io/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
      <category term="Hexo" scheme="https://microcodor.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
